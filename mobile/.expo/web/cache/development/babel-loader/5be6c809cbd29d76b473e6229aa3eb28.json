{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { StatusBar } from 'expo-status-bar';\nimport React, { useState } from 'react';\nimport axios from \"axios\";\nimport View from \"react-native-web/dist/exports/View\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport API from \"../../api\";\nimport { AuthContext } from \"../../contexts/authContext\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nvar authScreen = function authScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUsername = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setIsLoading = _useState6[1];\n\n  var _useState7 = useState(\"NA\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      authStatus = _useState8[0],\n      setAuthStatus = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isError = _useState10[0],\n      setError = _useState10[1];\n\n  var setLoggedIn = React.useContext(AuthContext);\n\n  var onSubmit = function onSubmit() {\n    var res;\n    return _regeneratorRuntime.async(function onSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setIsLoading(true);\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(axios.post(\"http://\" + API + \":8080/api/signin\", {\n              username: username,\n              password: password\n            }));\n\n          case 4:\n            res = _context.sent;\n            setIsLoading(false);\n\n            if (!(res.status != 200)) {\n              _context.next = 11;\n              break;\n            }\n\n            setAuthStatus(\"denied\");\n            setError(true);\n            console.log(\"denied\");\n            return _context.abrupt(\"return\");\n\n          case 11:\n            _context.prev = 11;\n            console.log(res.data.data);\n            _context.next = 15;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem('user'));\n\n          case 15:\n            _context.next = 17;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('user', JSON.stringify(res.data.data)));\n\n          case 17:\n            _context.next = 21;\n            break;\n\n          case 19:\n            _context.prev = 19;\n            _context.t0 = _context[\"catch\"](11);\n\n          case 21:\n            setLoggedIn(true);\n            _context.next = 31;\n            break;\n\n          case 24:\n            _context.prev = 24;\n            _context.t1 = _context[\"catch\"](1);\n            console.log(_context.t1.message);\n            setError(true);\n            setIsLoading(false);\n            setAuthStatus(\"denied\");\n            return _context.abrupt(\"return\");\n\n          case 31:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 24], [11, 19]], Promise);\n  };\n\n  return React.createElement(KeyboardAvoidingView, {\n    behavior: Platform.OS === \"ios\" ? \"padding\" : \"height\",\n    style: styles.container\n  }, React.createElement(TouchableWithoutFeedback, {\n    onPress: Keyboard.dismiss\n  }, React.createElement(View, {\n    style: styles.inner\n  }, React.createElement(Text, {\n    style: styles.header\n  }, \"Fitr\"), React.createElement(View, null, React.createElement(TextInput, {\n    placeholderTextColor: \"#ffc3b8\",\n    style: styles.textInput,\n    onChangeText: setUsername,\n    value: username,\n    placeholder: \"Username\",\n    style: styles.textInput\n  }), React.createElement(TextInput, {\n    placeholderTextColor: \"#ffc3b8\",\n    secureTextEntry: true,\n    onChangeText: setPassword,\n    value: password,\n    placeholder: \"Password\",\n    style: styles.textInput\n  })), isError ? React.createElement(Text, {\n    style: {\n      color: \"blue\"\n    }\n  }, \"* Login Failed. The credentials do not match.\") : React.createElement(Text, null), React.createElement(View, {\n    style: styles.btnContainer\n  }, React.createElement(Button, {\n    color: \"white\",\n    title: \"Submit\",\n    disabled: isLoading,\n    onPress: function onPress() {\n      return onSubmit();\n    }\n  }), React.createElement(Button, {\n    color: \"white\",\n    title: \"Forgot your password?\",\n    onPress: function onPress() {\n      return navigation.navigate('Forgot Password');\n    }\n  }), React.createElement(Button, {\n    color: \"white\",\n    title: \"Don't have an account?\",\n    onPress: function onPress() {\n      return navigation.navigate('Signup');\n    }\n  })))));\n};\n\nexport default authScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#344955\"\n  },\n  inner: {\n    padding: 24,\n    flex: 1,\n    justifyContent: \"space-around\"\n  },\n  header: {\n    fontSize: 36,\n    fontWeight: \"300\",\n    marginBottom: 48,\n    color: \"white\"\n  },\n  textInput: {\n    height: 40,\n    color: \"white\",\n    borderColor: \"white\",\n    borderBottomWidth: 1,\n    marginBottom: 50\n  },\n  btnContainer: {\n    marginTop: 12\n  }\n});","map":{"version":3,"sources":["/Users/adiash/Documents/CS506/fitr-506/mobile/screens/auth/authScreen.js"],"names":["StatusBar","React","useState","axios","API","AuthContext","AsyncStorage","authScreen","navigation","username","setUsername","password","setPassword","isLoading","setIsLoading","authStatus","setAuthStatus","isError","setError","setLoggedIn","useContext","onSubmit","post","res","status","console","log","data","removeItem","setItem","JSON","stringify","message","Platform","OS","styles","container","Keyboard","dismiss","inner","header","textInput","color","btnContainer","navigate","StyleSheet","create","flex","backgroundColor","padding","justifyContent","fontSize","fontWeight","marginBottom","height","borderColor","borderBottomWidth","marginTop"],"mappings":"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","sourcesContent":["import { StatusBar } from 'expo-status-bar';\nimport React, { useState } from 'react';\nimport axios from \"axios\";\nimport { View, KeyboardAvoidingView, TextInput, StyleSheet, Text, Platform, TouchableWithoutFeedback, Button, Keyboard } from 'react-native';\nimport API from \"../../api\";\nimport { AuthContext } from '../../contexts/authContext';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\n\nconst authScreen = ({ navigation }) => {\n  const [username, setUsername] = useState(null);\n  const [password, setPassword] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [authStatus, setAuthStatus] = useState(\"NA\");\n  const [isError, setError] = useState(false);\n\n  const setLoggedIn = React.useContext(AuthContext);\n\n\n  const onSubmit = async () => {\n    setIsLoading(true);\n    try {\n      \n      const res = await axios.post(`http://${API}:8080/api/signin`, { username: username, password: password });\n      setIsLoading(false);\n\n      if (res.status != 200) {\n        setAuthStatus(\"denied\");\n        setError(true);\n        console.log(\"denied\");\n        return;\n      }\n\n      try {\n        console.log(res.data.data);\n        await AsyncStorage.removeItem('user');\n        await AsyncStorage.setItem('user', JSON.stringify(res.data.data))\n      } catch (e) {\n        // saving error\n      }\n      setLoggedIn(true);\n\n    } catch (e) {\n      console.log(e.message);\n      setError(true);\n      setIsLoading(false);\n      setAuthStatus(\"denied\");\n      return;\n    }\n  }\n\n  // Change Submit button to {onSubmit}\n  // <Button color=\"white\" title=\"Submit\" disabled={isLoading} onPress={onSubmit} />\n\n  return (\n    <KeyboardAvoidingView\n      behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n      style={styles.container}\n    >\n      <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\n        <View style={styles.inner}>\n          <Text style={styles.header}>Fitr</Text>\n          <View>\n            <TextInput placeholderTextColor=\"#ffc3b8\" style ={styles.textInput} onChangeText={setUsername} value={username} placeholder=\"Username\" style={styles.textInput} />\n            <TextInput placeholderTextColor=\"#ffc3b8\" secureTextEntry={true} onChangeText={setPassword} value={password} placeholder=\"Password\" style={styles.textInput} />\n          </View>\n          {(isError)?(<Text style={{color:\"blue\"}}>* Login Failed. The credentials do not match.</Text>):<Text/>}\n          <View style={styles.btnContainer}>\n            <Button color=\"white\" title=\"Submit\" disabled={isLoading} onPress={() => onSubmit()} />\n            <Button color=\"white\" title=\"Forgot your password?\" onPress={() => navigation.navigate('Forgot Password')} />\n            <Button color=\"white\" title=\"Don't have an account?\" onPress={() => navigation.navigate('Signup')} />\n          </View>\n        </View>\n      </TouchableWithoutFeedback>\n    </KeyboardAvoidingView>\n  );\n}\n\n\n\nexport default authScreen;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#344955\"\n  },\n  inner: {\n    padding: 24,\n    flex: 1,\n    justifyContent: \"space-around\"\n  },\n  header: {\n    fontSize: 36,\n    fontWeight: \"300\",\n    marginBottom: 48,\n    color:\"white\",\n  },\n  textInput: {\n    height: 40,\n    color: \"white\",\n    borderColor: \"white\",\n    borderBottomWidth: 1,\n    marginBottom: 50\n  },\n  btnContainer: {\n    marginTop: 12\n  }\n});\n\n"]},"metadata":{},"sourceType":"module"}