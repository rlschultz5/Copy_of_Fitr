{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useRef, useMemo, useEffect, forwardRef, useImperativeHandle } from \"react\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Picker as RNPicker } from \"@react-native-picker/picker\";\nimport DefaultInputButton from \"./InputButton\";\nimport DefaultDoneBar from \"./DoneBar\";\nimport IOSPicker from \"./IOSPicker\";\nimport AndroidPicker from \"./AndroidPicker\";\nimport { DEFAULT_BACKDROP_ANIMATION } from \"../constants/animation\";\nimport { getAnimatedProperties } from \"../helpers/animation\";\nimport { isIOS } from \"../helpers/iphone\";\nimport { EMPTY_ITEM } from \"../constants/item\";\nvar Picker = forwardRef(function (_ref, ref) {\n  var item = _ref.item,\n      items = _ref.items,\n      onItemChange = _ref.onItemChange,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$placeholder = _ref.placeholder,\n      placeholder = _ref$placeholder === void 0 ? \"\" : _ref$placeholder,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? \"\" : _ref$title,\n      _ref$mode = _ref.mode,\n      mode = _ref$mode === void 0 ? \"dialog\" : _ref$mode,\n      _ref$doneButtonLabel = _ref.doneButtonLabel,\n      doneButtonLabel = _ref$doneButtonLabel === void 0 ? \"\" : _ref$doneButtonLabel,\n      _ref$isNullable = _ref.isNullable,\n      isNullable = _ref$isNullable === void 0 ? false : _ref$isNullable,\n      _ref$onOpen = _ref.onOpen,\n      onOpen = _ref$onOpen === void 0 ? function () {\n    return null;\n  } : _ref$onOpen,\n      _ref$onClose = _ref.onClose,\n      onClose = _ref$onClose === void 0 ? function () {\n    return null;\n  } : _ref$onClose,\n      style = _ref.style,\n      containerStyle = _ref.containerStyle,\n      textInputStyle = _ref.textInputStyle,\n      touchableStyle = _ref.touchableStyle,\n      InputComponent = _ref.InputComponent,\n      DoneBarComponent = _ref.DoneBarComponent,\n      _ref$backdropAnimatio = _ref.backdropAnimation,\n      backdropAnimation = _ref$backdropAnimatio === void 0 ? DEFAULT_BACKDROP_ANIMATION : _ref$backdropAnimatio,\n      androidCustomProps = _ref.androidCustomProps,\n      iosCustomProps = _ref.iosCustomProps;\n  var isAndroid = Platform.OS === \"android\";\n  var androidPickerRef = useRef(null);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      show = _useState2[0],\n      setShow = _useState2[1];\n\n  var _useState3 = useState(item ? items.find(function (_ref2) {\n    var label = _ref2.label,\n        value = _ref2.value;\n    return label === item.label && value === item.value;\n  }) || EMPTY_ITEM : isNullable ? EMPTY_ITEM : items[0]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedItem = _useState4[0],\n      setSelectedItem = _useState4[1];\n\n  var fadeAnimationValue = useRef(new Animated.Value(0)).current;\n  var animationProperties = useMemo(function () {\n    return getAnimatedProperties(backdropAnimation);\n  }, [backdropAnimation]);\n  useImperativeHandle(ref, function () {\n    return {\n      open: function open() {\n        setShow(true);\n\n        if (isAndroid && androidPickerRef.current) {\n          androidPickerRef.current.focus();\n        }\n      },\n      close: function close() {\n        setShow(false);\n\n        if (isAndroid && androidPickerRef.current) {\n          androidPickerRef.current.blur();\n        }\n      }\n    };\n  }, []);\n  useEffect(function () {\n    var nullableItems = isNullable ? [EMPTY_ITEM].concat(_toConsumableArray(items)) : items;\n    var itemIndex = nullableItems.findIndex(function (_ref3) {\n      var label = _ref3.label;\n      return label === (item === null || item === void 0 ? void 0 : item.label);\n    });\n\n    if (itemIndex !== -1) {\n      setSelectedItem(nullableItems[itemIndex]);\n    }\n  }, [item]);\n\n  var handleItemChange = function handleItemChange(value, index) {\n    var nullableItems = isNullable ? [EMPTY_ITEM].concat(_toConsumableArray(items)) : items;\n    var newSelectedItem = nullableItems.find(function (currentItem) {\n      return value === currentItem.value;\n    }) || EMPTY_ITEM;\n    onItemChange(newSelectedItem, index);\n    setSelectedItem(newSelectedItem);\n  };\n\n  var toggle = function toggle() {\n    setShow(function (state) {\n      return !state;\n    });\n  };\n\n  useEffect(function () {\n    var _a, _b;\n\n    if (show) {\n      if (isAndroid) {\n        (_a = androidPickerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      }\n\n      onOpen && onOpen();\n    }\n\n    if (!show) {\n      if (isAndroid) {\n        (_b = androidPickerRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n      }\n\n      onClose && onClose();\n    }\n  }, [show]);\n\n  var togglePicker = function togglePicker() {\n    if (disabled) {\n      return;\n    }\n\n    if (!show) {\n      toggle();\n    }\n\n    Animated.timing(fadeAnimationValue, {\n      toValue: !show ? animationProperties.opacity : 0,\n      duration: !show ? animationProperties.duration : 0,\n      delay: !show ? animationProperties.delay : 0,\n      useNativeDriver: true\n    }).start(show ? toggle : undefined);\n  };\n\n  var onDonePress = function onDonePress() {\n    togglePicker();\n    var itemIndex = (isNullable ? [EMPTY_ITEM].concat(_toConsumableArray(items)) : items).findIndex(function (_ref4) {\n      var value = _ref4.value;\n      return value === selectedItem.value;\n    });\n    onItemChange(selectedItem, itemIndex);\n  };\n\n  var renderPickerItems = function renderPickerItems() {\n    var tempItems = isNullable ? [EMPTY_ITEM].concat(_toConsumableArray(items)) : items;\n    return tempItems.map(function (current) {\n      return React.createElement(RNPicker.Item, {\n        label: current.label,\n        value: current.value,\n        key: current.label\n      });\n    });\n  };\n\n  var renderPlaceholder = function renderPlaceholder() {\n    if (item && item.label) {\n      return item.label;\n    }\n\n    if (!isNullable && selectedItem.label) {\n      return selectedItem.label;\n    }\n\n    return placeholder;\n  };\n\n  var renderInputButton = function renderInputButton() {\n    var inputProps = {\n      togglePicker: togglePicker,\n      style: style,\n      text: renderPlaceholder(),\n      textInputStyle: textInputStyle,\n      touchableStyle: touchableStyle,\n      isNullable: false,\n      resetValue: undefined,\n      renderHiddenCompactIOSPicker: function renderHiddenCompactIOSPicker() {\n        return null;\n      }\n    };\n    var RenderComponent = InputComponent ? InputComponent : DefaultInputButton;\n    return React.createElement(RenderComponent, _extends({}, inputProps));\n  };\n\n  var renderDoneBarButton = function renderDoneBarButton() {\n    var barProps = {\n      title: title,\n      doneButtonLabel: doneButtonLabel,\n      onDonePress: onDonePress\n    };\n    var RenderComponent = DoneBarComponent ? DoneBarComponent : DefaultDoneBar;\n    return React.createElement(RenderComponent, _extends({}, barProps));\n  };\n\n  var pickerProps = {\n    selectedItem: selectedItem,\n    disabled: disabled,\n    title: title,\n    renderPickerItems: renderPickerItems,\n    renderInput: renderInputButton,\n    onItemChange: handleItemChange,\n    togglePicker: togglePicker,\n    containerStyle: containerStyle\n  };\n\n  if (isIOS) {\n    var iosProps = _extends(_extends({}, pickerProps), {\n      show: show,\n      renderDoneBar: renderDoneBarButton,\n      togglePicker: togglePicker,\n      containerStyle: containerStyle,\n      animationValue: fadeAnimationValue,\n      customProps: iosCustomProps || {}\n    });\n\n    return React.createElement(IOSPicker, _extends({}, iosProps));\n  }\n\n  var androidProps = _extends(_extends({}, pickerProps), {\n    mode: mode,\n    customProps: androidCustomProps || {}\n  });\n\n  return React.createElement(AndroidPicker, _extends({\n    ref: androidPickerRef\n  }, androidProps));\n});\nexport default Picker;","map":{"version":3,"sources":["/Users/adiash/Documents/CS506/fitr-506/mobile/node_modules/react-native-woodpicker/dist/components/Picker.js"],"names":["React","useState","useRef","useMemo","useEffect","forwardRef","useImperativeHandle","Picker","RNPicker","DefaultInputButton","DefaultDoneBar","IOSPicker","AndroidPicker","DEFAULT_BACKDROP_ANIMATION","getAnimatedProperties","isIOS","EMPTY_ITEM","ref","item","items","onItemChange","disabled","placeholder","title","mode","doneButtonLabel","isNullable","onOpen","onClose","style","containerStyle","textInputStyle","touchableStyle","InputComponent","DoneBarComponent","backdropAnimation","androidCustomProps","iosCustomProps","isAndroid","Platform","OS","androidPickerRef","show","setShow","find","label","value","selectedItem","setSelectedItem","fadeAnimationValue","Animated","Value","current","animationProperties","open","focus","close","blur","nullableItems","itemIndex","findIndex","handleItemChange","index","newSelectedItem","currentItem","toggle","state","_a","_b","togglePicker","timing","toValue","opacity","duration","delay","useNativeDriver","start","undefined","onDonePress","renderPickerItems","tempItems","map","createElement","Item","key","renderPlaceholder","renderInputButton","inputProps","text","resetValue","renderHiddenCompactIOSPicker","RenderComponent","renderDoneBarButton","barProps","pickerProps","renderInput","iosProps","renderDoneBar","animationValue","customProps","androidProps"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useMemo, useEffect, forwardRef, useImperativeHandle, } from \"react\";\nimport { Animated, Platform } from \"react-native\";\nimport { Picker as RNPicker } from \"@react-native-picker/picker\";\nimport DefaultInputButton from \"./InputButton\";\nimport DefaultDoneBar from \"./DoneBar\";\nimport IOSPicker from \"./IOSPicker\";\nimport AndroidPicker from \"./AndroidPicker\";\nimport { DEFAULT_BACKDROP_ANIMATION } from \"../constants/animation\";\nimport { getAnimatedProperties } from \"../helpers/animation\";\nimport { isIOS } from \"../helpers/iphone\";\nimport { EMPTY_ITEM } from \"../constants/item\";\nconst Picker = forwardRef(({ item, items, onItemChange, disabled = false, placeholder = \"\", title = \"\", mode = \"dialog\", doneButtonLabel = \"\", isNullable = false, onOpen = () => null, onClose = () => null, style, containerStyle, textInputStyle, touchableStyle, InputComponent, DoneBarComponent, backdropAnimation = DEFAULT_BACKDROP_ANIMATION, androidCustomProps, iosCustomProps, }, ref) => {\n    const isAndroid = Platform.OS === \"android\";\n    const androidPickerRef = useRef(null);\n    const [show, setShow] = useState(false);\n    const [selectedItem, setSelectedItem] = useState(item\n        ? items.find(({ label, value }) => label === item.label && value === item.value) || EMPTY_ITEM\n        : isNullable\n            ? EMPTY_ITEM\n            : items[0]);\n    const fadeAnimationValue = useRef(new Animated.Value(0)).current;\n    const animationProperties = useMemo(() => getAnimatedProperties(backdropAnimation), [backdropAnimation]);\n    useImperativeHandle(ref, () => ({\n        open: () => {\n            setShow(true);\n            if (isAndroid && androidPickerRef.current) {\n                androidPickerRef.current.focus();\n            }\n        },\n        close: () => {\n            setShow(false);\n            if (isAndroid && androidPickerRef.current) {\n                androidPickerRef.current.blur();\n            }\n        },\n    }), []);\n    useEffect(() => {\n        const nullableItems = isNullable ? [EMPTY_ITEM, ...items] : items;\n        const itemIndex = nullableItems.findIndex(({ label }) => label === (item === null || item === void 0 ? void 0 : item.label));\n        if (itemIndex !== -1) {\n            setSelectedItem(nullableItems[itemIndex]);\n        }\n    }, [item]);\n    const handleItemChange = (value, index) => {\n        const nullableItems = isNullable ? [EMPTY_ITEM, ...items] : items;\n        const newSelectedItem = nullableItems.find((currentItem) => value === currentItem.value) ||\n            EMPTY_ITEM;\n        onItemChange(newSelectedItem, index);\n        setSelectedItem(newSelectedItem);\n    };\n    const toggle = () => {\n        setShow((state) => !state);\n    };\n    useEffect(() => {\n        var _a, _b;\n        if (show) {\n            if (isAndroid) {\n                (_a = androidPickerRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n            }\n            onOpen && onOpen();\n        }\n        if (!show) {\n            if (isAndroid) {\n                (_b = androidPickerRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n            }\n            onClose && onClose();\n        }\n        // Only execute when show changes\n    }, [show]);\n    const togglePicker = () => {\n        if (disabled) {\n            return;\n        }\n        if (!show) {\n            toggle();\n        }\n        Animated.timing(fadeAnimationValue, {\n            toValue: !show ? animationProperties.opacity : 0,\n            duration: !show ? animationProperties.duration : 0,\n            delay: !show ? animationProperties.delay : 0,\n            useNativeDriver: true,\n        }).start(show ? toggle : undefined);\n    };\n    const onDonePress = () => {\n        togglePicker();\n        const itemIndex = (isNullable ? [EMPTY_ITEM, ...items] : items).findIndex(({ value }) => value === selectedItem.value);\n        onItemChange(selectedItem, itemIndex);\n    };\n    const renderPickerItems = () => {\n        const tempItems = isNullable ? [EMPTY_ITEM, ...items] : items;\n        return tempItems.map((current) => {\n            return (React.createElement(RNPicker.Item, { label: current.label, value: current.value, key: current.label }));\n        });\n    };\n    const renderPlaceholder = () => {\n        if (item && item.label) {\n            return item.label;\n        }\n        if (!isNullable && selectedItem.label) {\n            return selectedItem.label;\n        }\n        return placeholder;\n    };\n    const renderInputButton = () => {\n        const inputProps = {\n            togglePicker,\n            style,\n            text: renderPlaceholder(),\n            textInputStyle,\n            touchableStyle,\n            isNullable: false,\n            resetValue: undefined,\n            renderHiddenCompactIOSPicker: () => null, //DatePicker only\n        };\n        const RenderComponent = InputComponent\n            ? InputComponent\n            : DefaultInputButton;\n        return React.createElement(RenderComponent, Object.assign({}, inputProps));\n    };\n    const renderDoneBarButton = () => {\n        const barProps = {\n            title,\n            doneButtonLabel,\n            onDonePress,\n        };\n        const RenderComponent = DoneBarComponent\n            ? DoneBarComponent\n            : DefaultDoneBar;\n        return React.createElement(RenderComponent, Object.assign({}, barProps));\n    };\n    const pickerProps = {\n        selectedItem,\n        disabled,\n        title,\n        renderPickerItems,\n        renderInput: renderInputButton,\n        onItemChange: handleItemChange,\n        togglePicker,\n        containerStyle,\n    };\n    if (isIOS) {\n        const iosProps = Object.assign(Object.assign({}, pickerProps), { show, renderDoneBar: renderDoneBarButton, togglePicker,\n            containerStyle, animationValue: fadeAnimationValue, customProps: iosCustomProps || {} });\n        return React.createElement(IOSPicker, Object.assign({}, iosProps));\n    }\n    const androidProps = Object.assign(Object.assign({}, pickerProps), { mode, customProps: androidCustomProps || {} });\n    return React.createElement(AndroidPicker, Object.assign({ ref: androidPickerRef }, androidProps));\n});\nexport default Picker;\n"]},"metadata":{},"sourceType":"module"}